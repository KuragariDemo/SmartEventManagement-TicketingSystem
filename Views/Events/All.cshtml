@model EventSearchViewModel

@{
    ViewData["Title"] = "All Events";
}

<div class="evt-page-wrapper">

    <div class="evt-header">
        <h2>Discover Events</h2>
        <p style="color: var(--evt-text-muted);">
            Explore the latest concerts, workshops, and exhibitions.
        </p>
    </div>

    <div class="evt-search-container">
        <form method="get" asp-action="All" class="evt-search-form">

            <input type="text" name="searchCategory"
                   placeholder="Category"
                   value="@Model.SearchCategory" />

            <input type="text" name="searchLocation"
                   placeholder="Location"
                   value="@Model.SearchLocation" />

            <input type="date"
                   name="searchDate"
                   value="@(Model.SearchDate?.ToString("yyyy-MM-dd"))" />

            <input type="number"
                   step="0.01"
                   name="maxPrice"
                   placeholder="Max Price"
                   value="@Model.MaxPrice" />

            <button type="submit">Search</button>
        </form>
    </div>

    <div class="evt-grid">

        @if (Model.Events != null && Model.Events.Any())
        {
            foreach (var ev in Model.Events)
            {
                <div class="evt-card">

                    <div class="evt-img-wrapper">
                        <img src="@(string.IsNullOrEmpty(ev.ImageUrl)
                                 ? "/images/no-image.png"
                                 : "/images/events/" + ev.ImageUrl)"
                     class="evt-img" />


                        <span class="evt-category-badge">
                            @ev.Category?.Name
                        </span>
                    </div>

                    <div class="evt-card-body">
                        <div class="evt-date">
                            @ev.EventDate.ToString("MMM dd, yyyy • h:mm tt")
                        </div>

                        <h3 class="evt-title">@ev.Title</h3>

                        <div class="evt-location">
                            <i class="fas fa-map-pin"></i>
                            <span>@ev.Venue?.Name</span>
                        </div>

                        <div class="evt-card-footer">
                            <a asp-controller="Events"
                               asp-action="Details"
                               asp-route-id="@ev.Id"
                               class="evt-btn-details">
                                View Details
                            </a>
                        </div>
                    </div>

                </div>
            }
        }
        else
        {
            <div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                <p>No events found.</p>
            </div>
        }

    </div>

</div>
